<?
	$page["title"] = "Information about monitoring server";
	$page["file"] = "queue.html";

	include "include/config.inc";
	show_header($page["title"],10);
?>
 
<?
	show_table_header("QUEUE OF ITEMS TO BE UPDATED");

	echo "<br>";

	show_table_header("QUEUE");
?>
<?
	$now=time();
	$result=DBselect("select i.itemid, i.nextcheck, i.description, h.host from items i,hosts h where i.status=0 and h.status=0 and i.hostid=h.hostid and i.nextcheck<$now order by i.nextcheck");
	echo "<table border=0 width=100% bgcolor='#CCCCCC' cellspacing=1 cellpadding=3>";
	echo "\n";
	echo "<tr><td><b>Next time to check</b></td><td><b>Host</b></td><td><b>Description</b></td></tr>";
	echo "\n";
	for($i=0;$i<DBnum_rows($result);$i++)
	{
		$itemid=DBget_field($result,$i,0);
		$time=DBget_field($result,$i,1);
		$description=DBget_field($result,$i,2);
		$host=DBget_field($result,$i,3);

		$time=date("m.d.Y H:i:s",$time);

		if($col==1)
		{
			echo "<tr bgcolor=#EEEEEE>";
			$col=0;
		} else
		{
			echo "<tr bgcolor=#DDDDDD>";
			$col=1;
		}
		echo "\n";
		echo "<td>$time</td><td>$host</td><td>$description</td>";
		echo "\n";
		echo "</tr>"; 
		echo "\n";
	}
	echo "</table>";
?>
<?
	$i=DBnum_rows($result);
	show_table_header("Total:$i");
?>

<?
	show_footer();
?>
