<?
	$page["title"] = "Configuration of Zabbix";
	$page["file"] = "config.html";

	include "include/config.inc";
	show_header($page["title"],0);
?>

<?
	show_table_header("CONFIGURATION OF ZABBIX");
	echo "<br>";
?>

<?
	if(isset($register) && ($register=="update"))
	{
		if(isset($password_required) && ($password_required=="true"))
		{
			$password_required="1";
		}
		else
		{
			$password_required="0";
		}
		update_config($smtp_server,$smtp_helo,$smtp_email,$password_required);
	}
?>

<?
	$result=DBselect("select smtp_server,smtp_helo,smtp_email,password_required from config");
	$smtp_server=DBget_field($result,0,0);
	$smtp_helo=DBget_field($result,0,1);
	$smtp_email=DBget_field($result,0,2);
	$password_required=DBget_field($result,0,3);
?>

<?
	show_table2_header_begin();
	echo "Configuration";

	show_table2_v_delimiter();
	echo "<form method=\"post\" action=\"config.html\">";
	echo "SMTP server";
	show_table2_h_delimiter();
	echo "<input name=\"smtp_server\" value=\"$smtp_server\"size=40>";

	show_table2_v_delimiter();
	echo "Value from SMTP HELO authentification";
	show_table2_h_delimiter();
	echo "<input name=\"smtp_helo\" value=\"$smtp_helo\"size=40>";

	show_table2_v_delimiter();
	echo "ZABBIX email address to send alarms from";
	show_table2_h_delimiter();
	echo "<input name=\"smtp_email\" value=\"$smtp_email\"size=40>";

	show_table2_v_delimiter();
	echo "Password required ?";
	show_table2_h_delimiter();
	echo "<input type=\"checkbox\" ";
	if($password_required==1) { echo "checked "; }
	echo "name=\"password_required\"  VALUE=\"true\">";

	show_table2_v_delimiter2();
	echo "<input type=\"submit\" name=\"register\" value=\"update\">";

	show_table2_header_end();
?>

<?
	show_footer();
?>
